%
%	Theorieteil
%

\pagebreak
\section{Data Exploration}

\onehalfspacing

\subsection{Data Layout}

The data consists of twelve datasets, one per year (3) and one per CNI (4).

After our data wrangling, all datasets now contain the following five blocks of metrics in a single row per observation:

\begin{itemize}
    \item Idle server memory and CPU consumption
    \item TCP Pod-to-Pod bandwidth, memory, and CPU consumption
    \item UDP Pod-to-Pod bandwidth, memory, and CPU consumption
    \item TCP Pod-to-Server bandwidth, memory, and CPU consumption
    \item UDP Pod-to-Server bandwidth, memory, and CPU consumption
\end{itemize}

For our data, Pod-to-Pod traffic refers to traffic between Pods in the same cluster, and Pod-to-Server traffic refers to traffic from a Pod to an outside application.

The individual field names are derived from each dataset's first row and are consistent across all sets.

\subsection{2020}

\subsubsection{Flannel}

The first data set we will look at is the 2020 data set for Flannel,
which we will read using R's built-in read.csv function.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{main }\OtherTok{\textless{}{-}} \StringTok{"."}
\NormalTok{cni }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\FunctionTok{here}\NormalTok{(main,}\StringTok{"data"}\NormalTok{,}\StringTok{"2020{-}flannel.csv"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

In the next step, we will have a look at the structure of our data and
visually inspect the measurements.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{str}\NormalTok{(cni)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
'data.frame':   3095 obs. of  24 variables:
 $ smem  : num  593 596 590 591 588 ...
 $ scpu  : num  0.682 0.679 0.662 0.642 0.728 ...
 $ cmem  : num  588 595 591 587 592 ...
 $ ccpu  : num  0.572 0.601 0.54 0.517 0.579 ...
 $ tcpbw : num  9675 9757 9693 9689 9773 ...
 $ tcpsm : num  590 589 593 592 593 ...
 $ tcpsc : num  5.16 5.16 5.18 5.2 5.12 ...
 $ tcpcm : num  593 591 591 593 593 ...
 $ tcpcc : num  5.17 5.1 5.02 5.04 5.23 ...
 $ udpbw : num  9845 9842 9842 9841 9840 ...
 $ udpsm : num  591 590 592 594 589 ...
 $ udpsc : num  5.49 5.47 5.44 5.42 5.5 ...
 $ udpcm : num  608 611 608 613 614 ...
 $ udpcc : num  12.9 12.9 12.9 12.9 13 ...
 $ tcpebw: num  9831 9828 9827 9826 9838 ...
 $ tcpesm: num  589 596 591 590 589 ...
 $ tcpesc: num  4.92 5.07 5.08 5.03 5.14 ...
 $ tcpecm: num  595 601 595 595 593 ...
 $ tcpecc: num  5.47 5.55 5.46 5.52 5.29 ...
 $ udpebw: num  9823 9833 9818 9818 9833 ...
 $ udpesm: num  594 596 594 593 597 ...
 $ udpesc: num  5.25 5.3 5.34 5.41 5.23 ...
 $ udpecm: num  601 601 603 604 600 ...
 $ udpecc: num  12.6 12.7 12.7 12.7 12.6 ...
\end{verbatim}

The various values for memory consumption (MB), CPU usage (Percentage), and
bandwidth (MBit/s) look fine at first glance.

For further analysis, we will inspect the values a bit more
closely, starting with memory consumption. First, we'll look at the idle values and get:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{median}\NormalTok{(cni}\SpecialCharTok{\$}\NormalTok{smem)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 592.8159
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{mean}\NormalTok{(cni}\SpecialCharTok{\$}\NormalTok{smem)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 593.1625
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{min}\NormalTok{(cni}\SpecialCharTok{\$}\NormalTok{smem)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 585
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{max}\NormalTok{(cni}\SpecialCharTok{\$}\NormalTok{smem)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 606
\end{verbatim}

As the Median is more robust against outliers and works better with data that might be skewed, we'll focus on the median values going forward.\footnote{See \textit{Orn, A. (2023)}: Means and Medians: When To Use Which. \cite{meansMedians}}

Comparing the idle memory consumption with the other measurements for memory consumption (TCP and UDP, and Pod-to-Pod and Pod-to-Server), we get a fairly consistent picture:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{median}\NormalTok{(cni}\SpecialCharTok{\$}\NormalTok{tcpsm)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 591.2724
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{median}\NormalTok{(cni}\SpecialCharTok{\$}\NormalTok{udpsm)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 591.5915
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{median}\NormalTok{(cni}\SpecialCharTok{\$}\NormalTok{tcpesm)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 590.1462
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{median}\NormalTok{(cni}\SpecialCharTok{\$}\NormalTok{udpesm)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 594.3655
\end{verbatim}

Next, we will check CPU consumption, starting again with idle values:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{median}\NormalTok{(cni}\SpecialCharTok{\$}\NormalTok{scpu)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 0.6546849
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{mean}\NormalTok{(cni}\SpecialCharTok{\$}\NormalTok{scpu)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 0.6695833
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{min}\NormalTok{(cni}\SpecialCharTok{\$}\NormalTok{scpu)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 0.6
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{max}\NormalTok{(cni}\SpecialCharTok{\$}\NormalTok{scpu)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 0.82
\end{verbatim}

When we validate this with the other measurements for CPU consumption, we get again fairly consistent values across the measurements but a clear differentiation
to the idle values:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{median}\NormalTok{(cni}\SpecialCharTok{\$}\NormalTok{tcpsc)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 5.162688
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{median}\NormalTok{(cni}\SpecialCharTok{\$}\NormalTok{udpsc)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 5.483832
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{median}\NormalTok{(cni}\SpecialCharTok{\$}\NormalTok{tcpesc)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 5.055657
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{median}\NormalTok{(cni}\SpecialCharTok{\$}\NormalTok{udpesc)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 5.30168
\end{verbatim}

Idle CPU consumption does not seem to be a good overall performance indicator

The final data point we want to look at is bandwidth, the core
performance metric for a network:\footnote{See \textit{Solarwinds (2024)}: What are Network Performance Metrics? \cite{networkPerformance}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{median}\NormalTok{(cni}\SpecialCharTok{\$}\NormalTok{tcpbw)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 9705.809
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{median}\NormalTok{(cni}\SpecialCharTok{\$}\NormalTok{udpbw)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 9843.559
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{median}\NormalTok{(cni}\SpecialCharTok{\$}\NormalTok{tcpebw)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 9828.35
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{median}\NormalTok{(cni}\SpecialCharTok{\$}\NormalTok{udpebw)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 9822.046
\end{verbatim}

With the majority of the internet traffic being TCP, we will focus on
the measurements for TCP for analysis and comparison.\footnote{See \textit{Quian, L. (2012)}: A flow-based performance analysis of TCP and TCP applications. \cite{tcpTraffic}}

We visualize both the TCP Pod-to-Pod and Pod-to-Server traffic bandwidth using histograms:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{gf\_histogram}\NormalTok{(}\SpecialCharTok{\textasciitilde{}}\NormalTok{tcpbw, }\AttributeTok{data =}\NormalTok{ cni")} 
\end{Highlighting}
\end{Shaded}

\begin{figure}[H]
\centering
\caption {FLannel Pod-to-Pod Bandwidth}
\includegraphics[width=\linewidth]{images/unnamed-chunk-8-1.png}
\label{fig:flannel-8-1}
\end{figure}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{gf\_histogram}\NormalTok{(}\SpecialCharTok{\textasciitilde{}}\NormalTok{tcpebw, }\AttributeTok{data =}\NormalTok{ cni")} 
\end{Highlighting}
\end{Shaded}

\begin{figure}[H]
\centering
\caption {FLannel Pod-to-Server Bandwidth}
\includegraphics[width=\linewidth]{images/unnamed-chunk-9-1.png}
\label{fig:flannel-9-1}
\end{figure}

The data distribution supports our choice to use the median values as key indicators for TCP bandwidth.

After a highly scientific coin toss,\footnote{See \textit{Kim, S.E. (2024)}: Scientists Destroy Illusion That Coin Toss Flips Are 50â€“50. \cite{coinToss}} we will use the TCP Pod-to Server values for CPU usage and memory consumption for further analysis.

From the 2020 Flannel dataset, we will thus use the following values:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{median}\NormalTok{(cni}\SpecialCharTok{\$}\NormalTok{tcpesm)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 590.1462
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{median}\NormalTok{(cni}\SpecialCharTok{\$}\NormalTok{tcpesc)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 5.055657
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{median}\NormalTok{(cni}\SpecialCharTok{\$}\NormalTok{tcpbw)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 9705.809
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{median}\NormalTok{(cni}\SpecialCharTok{\$}\NormalTok{tcpebw)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 9828.35
\end{verbatim}

\subsubsection{Calico}

\subsubsection{Canal}

\subsubsection{Cilium}

\subsection{2021}

\subsubsection{Flannel}

We will now read the 2021 data set for Flannel.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{main }\OtherTok{\textless{}{-}} \StringTok{"."}
\NormalTok{cni }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\FunctionTok{here}\NormalTok{(main,}\StringTok{"data"}\NormalTok{,}\StringTok{"2021{-}flannel.csv"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

In the next step, we will examine the structure of our data and visually
inspect the measurements.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{str}\NormalTok{(cni)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
'data.frame':   3112 obs. of  24 variables:
 $ smem  : num  591 596 599 593 599 ...
 $ scpu  : num  0.67 0.665 0.699 0.654 0.699 ...
 $ cmem  : num  596 592 591 589 580 ...
 $ ccpu  : num  0.539 0.502 0.546 0.554 0.55 ...
 $ tcpbw : num  9657 9737 9680 9755 9689 ...
 ...
\end{verbatim}

Then, we'll extract the key metrics for further analysis:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{median}\NormalTok{(cni}\SpecialCharTok{\$}\NormalTok{tcpesm)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 590.5901
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{median}\NormalTok{(cni}\SpecialCharTok{\$}\NormalTok{tcpesc)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 5.015945
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{median}\NormalTok{(cni}\SpecialCharTok{\$}\NormalTok{tcpbw)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 9695.797
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{median}\NormalTok{(cni}\SpecialCharTok{\$}\NormalTok{tcpebw)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 9825.204
\end{verbatim}

The difference between the measurements in the 2020 and 2021 data sets is not that big; the data was taken only a couple of months apart, and the CNI versions were relatively close to each other.

\subsubsection{Calico}

\subsubsection{Canal}

\subsubsection{Cilium}

\subsection{2024}

\subsubsection{Flannel}

We will now read the 2024 data set for Flannel.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{main }\OtherTok{\textless{}{-}} \StringTok{"."}
\NormalTok{cni }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\FunctionTok{here}\NormalTok{(main,}\StringTok{"data"}\NormalTok{,}\StringTok{"2024{-}flannel.csv"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

In the next step, we will examine the structure of our data and visually
inspect the measurements.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{str}\NormalTok{(cni)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
'data.frame':   3104 obs. of  24 variables:
 $ smem  : num  1204 1210 1209 1208 1209 ...
 $ scpu  : num  0.0149 0.0145 0.0146 0.0154 0.0153 ...
 $ cmem  : num  1187 1199 1201 1222 1219 ...
 $ ccpu  : num  0.0125 0.0121 0.0122 0.0122 0.0121 ...
 $ tcpbw : num  18936 19076 19206 19056 19097 ...
 ...
\end{verbatim}

Then, we'll extract the key metrics for further analysis:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{median}\NormalTok{(cni}\SpecialCharTok{\$}\NormalTok{tcpesm)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 1175.85
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{median}\NormalTok{(cni}\SpecialCharTok{\$}\NormalTok{tcpesc)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 5.052353
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{median}\NormalTok{(cni}\SpecialCharTok{\$}\NormalTok{tcpbw)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 19166.04
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{median}\NormalTok{(cni}\SpecialCharTok{\$}\NormalTok{tcpebw)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 18942.3
\end{verbatim}

Compared to the previous years, we can see a significant increase in bandwidth. Between the 2021 and 2024 measurements were significant improvements in Kubernetes development and also the infrastructure setup now has 40GBit interface cards and switches.

\subsubsection{Calico}

\subsubsection{Canal}

\subsubsection{Cilium}
